\usepackage{listings}
\usepackage[dvipsnames]{xcolor}

\definecolor{my_keyword}{HTML}{076384}
\definecolor{my_comment}{HTML}{346109}
\definecolor{my_string}{HTML}{653A09}

\DeclareRobustCommand{\getFileName}{
    \filename@parse{\lstname}
    \texttt{\filename@base.\filename@ext}
}


\lstset{ % string literal style
    inputencoding=utf8,
    keepspaces=true, % пробелы в коментариях не съедать
    extendedchars=true,
    breaklines=true, % автоматический перенос строк
    tabsize=2, % таб = 2 пробел
    numbers=left, % где нумерация строк
    showtabs=2, % показывать табы
    frame=lines, % рамка
    captionpos=t,
    title=\getFileName,
    showspaces=false, % показывать пробелы
    showstringspaces=false, % показывать пробелы в строках
    keywordstyle=\bfseries\color{my_keyword}\bfseries,
    commentstyle=\color{my_comment},
    stringstyle=\color{my_string},
    basicstyle=\ttfamily\small, % Шрифт для отображения кода
    inputencoding=utf8,
    extendedchars=true,
    literate=
        {а}{{\cyra}}1
        {б}{{\cyrb}}1
        {в}{{\cyrv}}1
        {г}{{\cyrg}}1
        {д}{{\cyrd}}1
        {е}{{\cyre}}1
        {ё}{\"{\cyre}}1
        {ж}{{\cyrzh}}1
        {з}{{\cyrz}}1
        {и}{{\cyri}}1
        {й}{{\cyrishrt}}1
        {к}{{\cyrk}}1
        {л}{{\cyrl}}1
        {м}{{\cyrm}}1
        {н}{{\cyrn}}1
        {о}{{\cyro}}1
        {п}{{\cyrp}}1
        {р}{{\cyrr}}1
        {с}{{\cyrs}}1
        {т}{{\cyrt}}1
        {у}{{\cyru}}1
        {ф}{{\cyrf}}1
        {х}{{\cyrh}}1
        {ц}{{\cyrc}}1
        {ч}{{\cyrch}}1
        {ш}{{\cyrsh}}1
        {щ}{{\cyrshch}}1
        {ъ}{{\cyrhrdsn}}1
        {ы}{{\cyrery}}1
        {ь}{{\cyrsftsn}}1
        {э}{{\cyrerev}}1
        {ю}{{\cyryu}}1
        {я}{{\cyrya}}1
        {А}{{\CYRA}}1
        {Б}{{\CYRB}}1
        {В}{{\CYRV}}1
        {Г}{{\CYRG}}1
        {Д}{{\CYR96}}1
        {Е}{{\CYRE}}1
        {Ё}{{\"{\CYRE}}}1
        {Ж}{{\CYRZH}}1
        {З}{{\CYRZ}}1
        {И}{{\CYRI}}1
        {Й}{{\CYRISHRT}}1
        {К}{{\CYRK}}1
        {Л}{{\CYRL}}1
        {М}{{\CYRM}}1
        {Н}{{\CYRN}}1
        {О}{{\CYRO}}1
        {П}{{\CYRP}}1
        {Р}{{\CYRR}}1
        {С}{{\CYRS}}1
        {Т}{{\CYRT}}1
        {У}{{\CYRU}}1
        {Ф}{{\CYRF}}1
        {Х}{{\CYRH}}1
        {Ц}{{\CYRC}}1
        {Ч}{{\CYRCH}}1
        {Ш}{{\CYRSH}}1
        {Щ}{{\CYRSHCH}}1
        {Ъ}{{\CYRHRDSN}}1
        {Ы}{{\CYRERY}}1
        {Ь}{{\CYRSFTSN}}1
        {Э}{{\CYREREV}}1
        {Ю}{{\CYRYU}}1
        {Я}{{\CYRYA}}1
}